#!/bin/sh

# Hata durumunda script'i sonlandÄ±r
set -e

# Gerekli dizinlerin mevcut ve yazÄ±labilir olduÄŸundan emin ol
# Bu dizinler Docker Volume olarak baÄŸlanacak
mkdir -p /home/appuser/.cache/torch
mkdir -p /home/appuser/.local/share/tts
chown -R appuser:appgroup /home/appuser/.cache
chown -R appuser:appgroup /home/appuser/.local

echo "âœ… Cache dizinleri hazÄ±rlandÄ±."
echo "ğŸš€ Uvicorn sunucusu baÅŸlatÄ±lÄ±yor..."

# Ana uygulamayÄ± baÅŸlat
exec uvicorn app.main:app --host "0.0.0.0" --port "14030" --timeout-graceful-shutdown 15